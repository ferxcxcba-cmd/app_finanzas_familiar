# ğŸ¨ DIAGRAMA VISUAL COMPLETO DE LA ARQUITECTURA

## DIAGRAMA JERÃRQUICO COMPLETO

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                           APLICACIÃ“N FINANZAS FAMILIAR                     â•‘
â•‘                          Flutter + Firebase + SQLite                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚   main.dart     â”‚
                              â”‚   Entry Point   â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚                           â”‚
                    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Firebase  â”‚            â”‚  MaterialApp  â”‚
                    â”‚   init    â”‚            â”‚   + Theme     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                          â”‚   HomeScreen        â”‚
                                          â”‚  (userId: 'user123')â”‚
                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚                           â”‚                           â”‚
                    â”Œâ”€â”€â–¼â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”
                    â”‚Transâ”‚              â”‚ BudgetProvider â”‚         â”‚ SavingsProvider
                    â”‚Prov â”‚              â”‚  (ChangeNotif) â”‚         â”‚  (ChangeNotif)
                    â”‚     â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â””â”€â”€â”¬â”€â”€â”˜
                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚              â”‚              â”‚              â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
   â”‚ HOME    â”‚  â”‚ANALYTICS â”‚  â”‚ BUDGETS  â”‚  â”‚ SAVINGS  â”‚
   â”‚ SCREEN  â”‚  â”‚ SCREEN   â”‚  â”‚ SCREEN   â”‚  â”‚ SCREEN   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚              â”‚              â”‚              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚              â”‚              â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
   â”‚ Widgets â”‚  â”‚ Validatorsâ”‚  â”‚Formattersâ”‚
   â”‚ & UI    â”‚  â”‚ & Errors  â”‚  â”‚& Theme   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚              â”‚              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚              â”‚              â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Database  â”‚  â”‚    Sync    â”‚
   â”‚ Service   â”‚  â”‚  Service   â”‚
   â”‚ (SQLite)  â”‚  â”‚ (Firebase) â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚              â”‚
        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
        â”‚             â”‚
    â”Œâ”€â”€â”€â–¼â”€â”€â”      â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚SQLiteâ”‚      â”‚Firestoreâ”‚
    â”‚ DB   â”‚      â”‚  Cloud  â”‚
    â””â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## FLUJO DE DATOS DETALLADO

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          UI LAYER (PresentaciÃ³n)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Home â”‚ Analytics â”‚ Budgets â”‚ Savings â”‚ AddTransaction          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                 â”‚ Consumer     â”‚ Consumer       â”‚ Provider.of            â”‚
â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚   STATE MANAGEMENT      â”‚
                     â”‚      (Provider)         â”‚
                     â”‚                         â”‚
                     â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                     â”‚ â”‚ Transaction         â”‚ â”‚
                     â”‚ â”‚ Provider            â”‚ â”‚
                     â”‚ â”‚                     â”‚ â”‚
                     â”‚ â”‚ Properties:         â”‚ â”‚
                     â”‚ â”‚ - transactions      â”‚ â”‚
                     â”‚ â”‚ - balance           â”‚ â”‚
                     â”‚ â”‚ - totalIncome       â”‚ â”‚
                     â”‚ â”‚ - totalExpense      â”‚ â”‚
                     â”‚ â”‚                     â”‚ â”‚
                     â”‚ â”‚ Methods:            â”‚ â”‚
                     â”‚ â”‚ - addTransaction()  â”‚ â”‚
                     â”‚ â”‚ - deleteTransaction â”‚ â”‚
                     â”‚ â”‚ - getExpensesByCategory â”‚
                     â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                     â”‚          â”‚              â”‚
                     â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                     â”‚ â”‚ Budget Provider     â”‚ â”‚
                     â”‚ â”‚ Savings Provider    â”‚ â”‚
                     â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                     â”‚          â”‚              â”‚
                     â”‚ notifyListeners()      â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚              â”‚              â”‚
           â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”
           â”‚ Databaseâ”‚    â”‚  Sync   â”‚   â”‚Formatters
           â”‚ Service â”‚    â”‚ Service â”‚   â”‚Validators
           â”‚(SQLite) â”‚    â”‚(Firebase)   â”‚Constants
           â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚       â”‚              â”‚        â”‚
    â”Œâ”€â”€â”€â–¼â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”        â”Œâ”€â–¼â”€â”€â”€â”
    â”‚ DB  â”‚ â”‚ DB   â”‚        â”‚ API â”‚
    â”‚Localâ”‚ â”‚INSERTâ”‚        â”‚Cloudâ”‚
    â”‚Read â”‚ â”‚UPDATEâ”‚        â”‚Sync â”‚
    â”‚Writeâ”‚ â”‚DELETEâ”‚        â”‚Fetchâ”‚
    â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”˜

        â†“ (Cambios en estado)

    notifyListeners() â†’ Rebuild UI automÃ¡tico
```

---

## ÃRBOL DE COMPONENTES

```
MaterialApp
â”‚
â”œâ”€â”€ ThemeData
â”‚   â”œâ”€â”€ Colors (Primario, Secundario, Acento, etc)
â”‚   â”œâ”€â”€ TextTheme (8 tipos de texto)
â”‚   â”œâ”€â”€ ButtonTheme (Estilos de botones)
â”‚   â””â”€â”€ InputDecorationTheme
â”‚
â”œâ”€â”€ HomeScreen
â”‚   â”‚
â”‚   â””â”€â”€ MultiProvider(3)
â”‚       â”‚
â”‚       â”œâ”€â”€ ChangeNotifierProvider(TransactionProvider)
â”‚       â”œâ”€â”€ ChangeNotifierProvider(BudgetProvider)
â”‚       â”œâ”€â”€ ChangeNotifierProvider(SavingsProvider)
â”‚       â”‚
â”‚       â””â”€â”€ Scaffold
â”‚           â”‚
â”‚           â”œâ”€â”€ AppBar
â”‚           â”‚
â”‚           â”œâ”€â”€ body: IndexedStack(4)
â”‚           â”‚   â”‚
â”‚           â”‚   â”œâ”€â”€ [0] _buildHomeTab()
â”‚           â”‚   â”‚   â”‚
â”‚           â”‚   â”‚   â””â”€â”€ SingleChildScrollView
â”‚           â”‚   â”‚       â”‚
â”‚           â”‚   â”‚       â””â”€â”€ Column
â”‚           â”‚   â”‚           â”œâ”€â”€ BalanceCard
â”‚           â”‚   â”‚           â”‚   â””â”€â”€ Consumer<TransactionProvider>
â”‚           â”‚   â”‚           â”‚       â”œâ”€â”€ Container (Gradient)
â”‚           â”‚   â”‚           â”‚       â”œâ”€â”€ Text (Saldo Total)
â”‚           â”‚   â”‚           â”‚       â””â”€â”€ Row (Ingresos/Egresos)
â”‚           â”‚   â”‚           â”‚
â”‚           â”‚   â”‚           â”œâ”€â”€ Text ("Transacciones Recientes")
â”‚           â”‚   â”‚           â”‚
â”‚           â”‚   â”‚           â””â”€â”€ ListView.builder
â”‚           â”‚   â”‚               â”‚
â”‚           â”‚   â”‚               â””â”€â”€ TransactionItem
â”‚           â”‚   â”‚                   â”œâ”€â”€ Icon (CategorÃ­a)
â”‚           â”‚   â”‚                   â”œâ”€â”€ Column (DescripciÃ³n, Fecha)
â”‚           â”‚   â”‚                   â””â”€â”€ Text (Monto)
â”‚           â”‚   â”‚
â”‚           â”‚   â”œâ”€â”€ [1] AnalyticsScreen
â”‚           â”‚   â”‚   â”‚
â”‚           â”‚   â”‚   â””â”€â”€ Consumer<TransactionProvider>
â”‚           â”‚   â”‚       â”œâ”€â”€ Row (MonthSelector)
â”‚           â”‚   â”‚       â”œâ”€â”€ Row (SummaryCards)
â”‚           â”‚   â”‚       â”‚   â”œâ”€â”€ Card (Ingresos)
â”‚           â”‚   â”‚       â”‚   â””â”€â”€ Card (Egresos)
â”‚           â”‚   â”‚       â”‚
â”‚           â”‚   â”‚       â””â”€â”€ PieChart (fl_chart)
â”‚           â”‚   â”‚           â””â”€â”€ Gastos por categorÃ­a
â”‚           â”‚   â”‚
â”‚           â”‚   â”œâ”€â”€ [2] BudgetsScreen
â”‚           â”‚   â”‚   â”‚
â”‚           â”‚   â”‚   â””â”€â”€ Consumer<BudgetProvider>
â”‚           â”‚   â”‚       â”œâ”€â”€ SummaryCard
â”‚           â”‚   â”‚       â”œâ”€â”€ ElevatedButton (Nuevo)
â”‚           â”‚   â”‚       â”‚
â”‚           â”‚   â”‚       â””â”€â”€ ListView.builder
â”‚           â”‚   â”‚           â”‚
â”‚           â”‚   â”‚           â””â”€â”€ Container (BudgetCard)
â”‚           â”‚   â”‚               â”œâ”€â”€ Row (Icon, Name, %)
â”‚           â”‚   â”‚               â””â”€â”€ LinearProgressIndicator
â”‚           â”‚   â”‚
â”‚           â”‚   â””â”€â”€ [3] SavingsScreen
â”‚           â”‚       â”‚
â”‚           â”‚       â””â”€â”€ Consumer<SavingsProvider>
â”‚           â”‚           â”œâ”€â”€ Container (SummaryCard)
â”‚           â”‚           â”‚   â”œâ”€â”€ Text (Total Ahorrado)
â”‚           â”‚           â”‚   â””â”€â”€ LinearProgressIndicator
â”‚           â”‚           â”‚
â”‚           â”‚           â”œâ”€â”€ ElevatedButton (Nueva Meta)
â”‚           â”‚           â”‚
â”‚           â”‚           â”œâ”€â”€ ListView (ActiveGoals)
â”‚           â”‚           â”‚   â””â”€â”€ GoalCard (Progress + Buttons)
â”‚           â”‚           â”‚
â”‚           â”‚           â””â”€â”€ ListView (CompletedGoals)
â”‚           â”‚               â””â”€â”€ GoalCard (âœ“ Completada)
â”‚           â”‚
â”‚           â”œâ”€â”€ FloatingActionButton (+)
â”‚           â”‚   â””â”€â”€ onPressed â†’ AddTransactionScreen
â”‚           â”‚
â”‚           â””â”€â”€ BottomNavigationBar
â”‚               â”œâ”€â”€ Home
â”‚               â”œâ”€â”€ Analytics
â”‚               â”œâ”€â”€ Budgets
â”‚               â””â”€â”€ Savings
â”‚
â””â”€â”€ AddTransactionScreen (Modal)
    â”‚
    â””â”€â”€ Scaffold
        â”‚
        â””â”€â”€ SingleChildScrollView
            â”‚
            â””â”€â”€ Column
                â”œâ”€â”€ TypeSelector (Income/Expense)
                â”œâ”€â”€ TextFormField (Monto)
                â”œâ”€â”€ TextFormField (DescripciÃ³n)
                â”œâ”€â”€ CategorySelector (Grid)
                â”œâ”€â”€ DatePicker
                â”œâ”€â”€ TextFormField (Notas)
                â”‚
                â””â”€â”€ ElevatedButton (Guardar)
```

---

## MAPA DE PERSISTENCIA

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PERSISTENCIA DE DATOS                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                        MEMORIA (RAM)
                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                   â”‚                   â”‚
    â”Œâ”€â”€â”€â–¼â”€â”             â”Œâ”€â”€â–¼â”€â”€â”€â”           â”Œâ”€â”€â–¼â”€â”€â”€â”
    â”‚Transâ”‚             â”‚Budgetâ”‚           â”‚Savings
    â”‚list â”‚             â”‚list  â”‚           â”‚list
    â”‚(RAM)â”‚             â”‚(RAM) â”‚           â”‚(RAM)
    â””â”€â”€â”€â”¬â”€â”˜             â””â”€â”€â”¬â”€â”€â”€â”˜           â””â”€â”€â”¬â”€â”€â”€â”˜
        â”‚                  â”‚                  â”‚
        â”‚ DatabaseService  â”‚ DatabaseService  â”‚
        â”‚ insertTransactionâ”‚ insertBudget     â”‚
        â”‚ getTransactions()â”‚ getBudgets()     â”‚
        â”‚ updateTransactionâ”‚ updateBudget     â”‚
        â”‚ deleteTransactionâ”‚ deleteBudget     â”‚
        â”‚                  â”‚                  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      LOCAL DATABASE (DISK)           â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
        â”‚  â”‚  finanzas_familiar.db (SQLite)  â”‚â”‚
        â”‚  â”‚                                 â”‚â”‚
        â”‚  â”‚  Tables:                        â”‚â”‚
        â”‚  â”‚  â”œâ”€â”€ transactions               â”‚â”‚
        â”‚  â”‚  â”‚   â”œâ”€â”€ id, description        â”‚â”‚
        â”‚  â”‚  â”‚   â”œâ”€â”€ amount, type           â”‚â”‚
        â”‚  â”‚  â”‚   â”œâ”€â”€ category, date         â”‚â”‚
        â”‚  â”‚  â”‚   â”œâ”€â”€ userId, notes          â”‚â”‚
        â”‚  â”‚  â”‚   â””â”€â”€ isRecurring            â”‚â”‚
        â”‚  â”‚  â”‚                              â”‚â”‚
        â”‚  â”‚  â”œâ”€â”€ budgets                    â”‚â”‚
        â”‚  â”‚  â”‚   â”œâ”€â”€ id, category           â”‚â”‚
        â”‚  â”‚  â”‚   â”œâ”€â”€ limit, spent           â”‚â”‚
        â”‚  â”‚  â”‚   â”œâ”€â”€ month, year, userId    â”‚â”‚
        â”‚  â”‚  â”‚  â”‚                              â”‚â”‚
        â”‚  â”‚  â””â”€â”€ savings_goals              â”‚â”‚
        â”‚  â”‚      â”œâ”€â”€ id, title, description â”‚â”‚
        â”‚  â”‚      â”œâ”€â”€ targetAmount           â”‚â”‚
        â”‚  â”‚      â”œâ”€â”€ currentAmount          â”‚â”‚
        â”‚  â”‚      â”œâ”€â”€ createdDate, targetDateâ”‚
        â”‚  â”‚      â”œâ”€â”€ userId, isCompleted    â”‚â”‚
        â”‚  â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    SyncService
                  syncTransaction()
                  syncBudget()
                   syncSavingsGoal()
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   CLOUD DATABASE (Firebase)          â”‚
        â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
        â”‚   â”‚  Firestore (NoSQL Document DB) â”‚â”‚
        â”‚   â”‚                                 â”‚â”‚
        â”‚   â”‚  Collections:                   â”‚â”‚
        â”‚   â”‚  users/{userId}/                â”‚â”‚
        â”‚   â”‚  â”œâ”€â”€ transactions/{id}          â”‚â”‚
        â”‚   â”‚  â”‚   â””â”€â”€ {data}                 â”‚â”‚
        â”‚   â”‚  â”œâ”€â”€ budgets/{id}               â”‚â”‚
        â”‚   â”‚  â”‚   â””â”€â”€ {data}                 â”‚â”‚
        â”‚   â”‚  â”œâ”€â”€ savings_goals/{id}         â”‚â”‚
        â”‚   â”‚  â”‚   â””â”€â”€ {data}                 â”‚â”‚
        â”‚   â”‚  â”‚                              â”‚â”‚
        â”‚   â”‚  families/{code}/               â”‚â”‚
        â”‚   â”‚  â””â”€â”€ members/{email}            â”‚â”‚
        â”‚   â”‚      â””â”€â”€ {member data}          â”‚â”‚
        â”‚   â”‚                                 â”‚â”‚
        â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## CICLO DE VIDA DE UNA TRANSACCIÃ“N

```
Step 1: USER INTERACTION
        Tap FAB (+)
        â”‚
        â–¼
Step 2: SCREEN OPENED
        AddTransactionScreen displayed
        â”‚
        â”œâ”€ TypeSelector
        â”œâ”€ AmountInput
        â”œâ”€ DescriptionInput
        â”œâ”€ CategorySelector
        â”œâ”€ DatePicker
        â””â”€ NotesInput
        â”‚
        â–¼
Step 3: FORM FILLED & SUBMITTED
        User taps "Guardar"
        â”‚
        â”œâ”€ Form.validate()
        â”‚  â”œâ”€ Amount > 0? âœ…
        â”‚  â”œâ”€ Description 3+ chars? âœ…
        â”‚  â””â”€ Category selected? âœ…
        â”‚
        â–¼
Step 4: CREATE OBJECT
        Transaction {
          id: UUID,
          description: "Almuerzo",
          amount: 45.50,
          type: expense,
          category: "food",
          date: DateTime.now(),
          userId: "user123",
          notes: "Restaurant",
          isRecurring: false
        }
        â”‚
        â–¼
Step 5: PERSIST LOCALLY
        DatabaseService.insertTransaction()
        â”‚
        â”œâ”€ SQLite.db INSERT
        â”œâ”€ transactions table
        â””â”€ âœ… Saved locally
        â”‚
        â–¼
Step 6: SYNC REMOTELY (ASYNC)
        SyncService.syncTransaction()
        â”‚
        â”œâ”€ IF online
        â”‚  â”œâ”€ Firebase connect
        â”‚  â”œâ”€ users/{userId}/transactions/{id}
        â”‚  â””â”€ âœ… Cloud backup
        â””â”€ IF offline
           â””â”€ â³ Retry when online
        â”‚
        â–¼
Step 7: UPDATE PROVIDERS
        TransactionProvider.notifyListeners()
        â”‚
        â”œâ”€ transactions.add(transaction)
        â”œâ”€ Recalculate balance
        â”œâ”€ totalIncome/totalExpense updated
        â”‚
        BudgetProvider.updateBudgetSpent()
        â”‚
        â”œâ”€ Find budget for "food"
        â”œâ”€ spent = spent + 45.50
        â””â”€ notifyListeners()
        â”‚
        â–¼
Step 8: REBUILD UI
        Consumer<TransactionProvider>
        â”‚
        â”œâ”€ BalanceCard updated
        â”‚  â””â”€ balance = balance - 45.50
        â”‚
        â”œâ”€ TransactionList updated
        â”‚  â””â”€ New item at top
        â”‚
        â””â”€ BudgetCard updated
           â””â”€ "food" progress bar increases
        â”‚
        â–¼
Step 9: USER FEEDBACK
        SnackBar("TransacciÃ³n guardada")
        â”‚
        â–¼
Step 10: NAVIGATION
        Navigator.pop() â†’ Home Screen
```

---

## MATRIZ DE RELACIONES

```
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Trans    â”‚ Budget   â”‚ Savings  â”‚ Category â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ âŒ â†’ âœ…  â”‚ âœ… â† âœ…  â”‚ âœ… â†’ âœ…  â”‚ âœ… â† âœ…  â”‚
    â”‚ Amount   â”‚ Updates  â”‚ Creates  â”‚ Used     â”‚
    â”‚ updates  â”‚ spent    â”‚ goals    â”‚ in all   â”‚
    â”‚ budgets  â”‚ when     â”‚ with     â”‚          â”‚
    â”‚ when     â”‚ expense  â”‚ targets  â”‚          â”‚
    â”‚ expense  â”‚ added    â”‚ and      â”‚          â”‚
    â”‚ added    â”‚          â”‚ progress â”‚          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ESTADO DE LA APLICACIÃ“N

```
App State at any moment:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TransactionProvider.state                     â”‚
â”‚  â”œâ”€ transactions: [T1, T2, T3, ...]           â”‚
â”‚  â”œâ”€ totalIncome: 5000.00                      â”‚
â”‚  â”œâ”€ totalExpense: 2000.00                     â”‚
â”‚  â””â”€ balance: 3000.00                          â”‚
â”‚                                                â”‚
â”‚  BudgetProvider.state                         â”‚
â”‚  â”œâ”€ budgets: [B1, B2, B3, ...]               â”‚
â”‚  â”œâ”€ currentMonth: 2                           â”‚
â”‚  â””â”€ currentYear: 2026                         â”‚
â”‚                                                â”‚
â”‚  SavingsProvider.state                        â”‚
â”‚  â”œâ”€ goals: [G1, G2, G3, ...]                 â”‚
â”‚  â”œâ”€ totalSaved: 1000.00                      â”‚
â”‚  â”œâ”€ totalTargeted: 5000.00                    â”‚
â”‚  â””â”€ overallProgress: 20%                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Estos diagramas representan la arquitectura completa y visual del proyecto.**
